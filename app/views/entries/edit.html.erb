<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>VandalSquat â€“ Edit Entry</title>
  </head>

  <body>
    <div class="auth-container">
      <div class="auth-box">
        <h2>Edit Entry</h2>

        <% if flash[:alert] %>
          <p class="auth-error"><%= flash[:alert] %></p>
        <% end %>

        <%= form_with model: @entry, local: true, html: { multipart: true } do |f| %>
          <p>
            <label>
              Latitude
              <%= f.number_field :latitude, step: "any", required: true %>
            </label>
          </p>

          <p>
            <label>
              Longitude
              <%= f.number_field :longitude, step: "any", required: true %>
            </label>
          </p>

          <% if @entry.photo.attached? %>
            <div class="current-photo">
              <p style="font-size: 0.9rem; color: #bdbdbd; margin-bottom: 8px;">Current photo:</p>
              <%= image_tag @entry.photo, alt: "Current graffiti photo", style: "width: 100%; max-width: 200px; height: auto; border: 1px solid #333; margin-bottom: 12px;" %>
            </div>
          <% end %>

          <p>
            <label>
              Replace photo (optional)
              <%= f.file_field :photo, accept: "image/*" %>
            </label>
          </p>

          <p>
            <label>
              Writer / Tag
              <%= f.text_field :writer_name %>
            </label>
          </p>

          <p>
            <label>
              Notes
              <%= f.text_area :notes, rows: 4 %>
            </label>
          </p>

          <p>
            <label>
              Date found
              <%= f.date_field :found_on %>
            </label>
          </p>

          <p><%= f.submit "Update entry" %></p>
        <% end %>

        <div style="margin-top: 24px; padding-top: 24px; border-top: 1px solid #222;">
          <%= button_to "Delete entry",
                entry_path(@entry),
                method: :delete,
                data: { confirm: "Delete this entry permanently?" },
                class: "btn-danger" %>
        </div>
      </div>
    </div>
  </body>
</html>
